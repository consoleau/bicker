!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a){"ngInject";return{restrict:"A",link:function(b,c,d){b.$watch(function(){var e=b.$eval(d.routeClass);a.matchesCurrentBindingName(e.viewName,e.bindingName)?c.hasClass(e.className)||c.addClass(e.className):c.hasClass(e.className)&&c.removeClass(e.className)})}}}function g(a,b,c,d){"ngInject";return{restrict:"A",scope:!0,link:function(e,f,g){void 0===g.ignoreHref&&f.click(function(e){e.preventDefault();var g=f.attr("href");if(!e.metaKey)return a.isHtml5ModeEnabled()||(g=g.replace(/^#/,"")),d(function(){return c.url(g)});var h=b.location.protocol+"//"+b.location.host+g;b.open(h,"_blank")});var h=a.getUrlWriters();for(var i in h){var j=h[i];e[i+"UrlWriter"]=j}return e.$watch(g.routeHref,function(b){var c=void 0;return c=a.isHtml5ModeEnabled()?b:"#"+b,f.attr("href",c)})}}}function h(a,b,c,d,e,f,g,h,i,j,k,l,m){"ngInject";return{restrict:"E",scope:!1,replace:!0,template:"<div></div>",link:function(n,o,p){function q(a,b){b||(b="component");var c=a[b]?j.get(a[b]+"Directive")[0]:a;return _.defaults(_.pick(c,["controller","templateUrl","controllerAs"]),{controllerAs:"$ctrl"})}function r(a){var b=a.requiredState||[],c=!0,d=!1,e=void 0;try{for(var g,h=Array.from(b)[Symbol.iterator]();!(c=(g=h.next()).done);c=!0){var i=g.value,k=!1;"!"===i.charAt(0)&&(i=i.slice(1),k=!0);var l=f.get(i);if(null===l)return!1;if(k&&(l=!l),!l)return!1}}catch(a){d=!0,e=a}finally{try{!c&&h.return&&h.return()}finally{if(d)throw e}}return!(a.canActivate&&!j.invoke(a.canActivate))}function s(a,b){var c=t(b);if(!c)return void(D&&(h.addClass(a,"ng-hide").then(function(){return u(a)}),I=void 0,J=void 0,m.deleteCurrentBinding(G.name)));var d=K(c);if(c!==J||!angular.equals(I,d))return J=c,I=d,k.increase(),w(a,c).then(function(b){var d=b?300:void 0;return D?(E.$destroy(),v(a,c,d)):h.removeClass(a,"ng-hide").then(function(){return v(a,c,d)})})}function t(a){var b=!0,c=!1,d=void 0;try{for(var e,f=Array.from(a)[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;if(r(g))return g}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}function u(a){!1!==D&&(D=!1,a.children().eq(0).remove(),E.$destroy())}function v(b,c,d){var f=Date.now(),g=q(c),h=function(a){if(t(H)===c){D=!0;var e=Date.now()-f,h=function(){try{return B(b,g,a)}catch(a){return y(a,b,c)}finally{i(function(){if(!c.manualCompletion)return k.decrease()})}},j=Math.max(0,d-e);return e<d?i(function(){return h()},j):h()}},j=function(d){return i(function(){if(!c.manualCompletion)return k.decrease()}),a.error(d),x(d,b,c)};m.setCurrentBinding(G.name,c);var n={template:l(g.templateUrl),dependencies:N(c)};return e.all(n).then(h,j)}function w(a,c){if(!c.resolvingTemplateUrl||!c.resolve||0===Object.keys(c.resolve).length){var d=e.defer();return d.resolve(!1),d.promise}return l(c.resolvingTemplateUrl).then(function(c){return a.html(c),b(a.contents())(g.$new())})}function x(a,b,c){return c.resolvingErrorTemplateUrl?L(b,c):c.resolvingErrorComponent?A(a,b,c,"resolvingErrorComponent"):void 0}function y(a,b,c){var d=null;return c.errorTemplateUrl?d=M(b,c):c.errorComponent&&(d=A(a,b,c)),i(function(){if(!c.manualCompletion)return k.decrease()}),d}function z(a,c,d){if(c[d])return l(c[d]).then(function(c){a.html(c);var d=b(a.contents());return E=n.$new(),d(E)})}function A(a,b,c,d){if(d||(d="errorComponent"),c[d]){var e=q(c,d),f={dependencies:{error:a}};return l(e.templateUrl).then(function(a){return f.template=a,B(b,e,f)})}}function B(d,e,f){var g=f.dependencies,h=f.template;d.html(h);var i=b(d.contents());if(E=n.$new(),e.controller){var j=_.merge(g,{$scope:E,$element:d.children().eq(0)});try{j.$scope[e.controllerAs]=c(e.controller,j)}catch(b){var k=void 0;try{k=_.isObject(b)?JSON.stringify(b):b}catch(a){k="Failed to serialize error object for logging"}throw a.error("Failed instantiating controller for view "+G+": "+k),b}}return i(E)}function C(a){return"!"===a.charAt(0)?a.substr(1):a}var D=!1,E=void 0,F=!1,G=d.getView(p.name),H=G.getBindings();o.addClass("ng-hide");var I=void 0,J=void 0,K=function(a){return _.cloneDeep(f.getSubset(O(a)))},L=function(a,b){return z(a,b,"resolvingErrorTemplateUrl")},M=function(a,b){return z(a,b,"errorTemplateUrl")},N=function(a){if(!a.resolve||0===Object.keys(a.resolve).length){var b=e.defer();return b.resolve({}),b.promise}var c={};for(var d in a.resolve){var f=a.resolve[d];try{c[d]=j.invoke(f)}catch(a){c[d]=e.reject(a)}}return e.all(c)},O=function(a){return _.union(a.requiredState||[],a.watchedState||[])},P=function(a){return _.flatten(_.map(a.getBindings(),O))},Q=function(a){return _.uniq(_.map(P(a),C))}(G);return m.whenReady().then(function(){if(F=!0,s(o,H),F=!1,0!==Q.length){var a=function(a,b,c){if(!F)return F=!0,i(function(){return s(o,H),F=!1})};f.watch(Q,a),n.$on("$destroy",function(){return f.removeWatcher(a)})}})}}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};h.$inject=["$log","$compile","$controller","ViewBindings","$q","State","$rootScope","$animate","$timeout","$injector","PendingViewCounter","$templateRequest","Route"],g.$inject=["Route","$window","$location","$timeout"],f.$inject=["Route"];var j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(a){return void 0===a?"undefined":i(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":void 0===a?"undefined":i(a)};angular.module("bicker_router",["ngAnimate"]).run(["State","Route","$location","$rootScope","ObjectHelper","PendingViewCounter",function(a,b,c,d,e,f){"ngInject";var g=void 0;d.$on("$locationChangeStart",function(){b.isReady()&&b.setReady(!1)}),d.$on("$locationChangeSuccess",function(h,i){var j=void 0;if(i!==g){g=i,f.reset();var k=b.match(c.path());j=k?b.extractData(k):{};var l=e.notIn(a.list,j);l=_.difference(l,b.getPersistentStates().concat(b.getFlashStates()));var m={unsetting:l,setting:j};d.$emit("bicker_router.beforeStateChange",m),0!==m.unsetting.length&&a.unset(m.unsetting),_.forEach(m.setting,function(b,c){a.set(c,b)}),b.resetFlashStates(),b.setReady(!0)}})}]),angular.module("bicker_router").constant("ObjectHelper",{get:function(a,b){if(""===b)return a;var c=b.split("."),d=c.pop(),e=a,f=!0,g=!1,h=void 0;try{for(var i,j=c[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){if(void 0===(e=e[i.value]))return}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}return e[d]},set:function(a,b,c){var d=b.split("."),e=d.pop(),f=a,g=!0,h=!1,i=void 0;try{for(var j,k=d[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value;void 0===f[l]&&(f[l]={}),f=f[l]}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}return f[e]=c},unset:function(a,b){if(""===b)return a;var c=b.split("."),d=c.pop(),e=a,f=!0,g=!1,h=void 0;try{for(var i,j=c[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){if(void 0===(e=e[i.value]))return!1}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}return void 0!==e[d]&&(delete e[d],!0)},notIn:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=[];c=c.length>0?c+".":"";var e=!0,f=!1,g=void 0;try{for(var h,i=Array.from(Object.keys(a))[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value,l=""+c+j;void 0===b[j]?d.push(l):"object"!==k(a[j])||a[j]instanceof Array||(d=d.concat(this.notIn(a[j],b[j],l)))}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}return d},default:function(a){for(var b=void 0,c=void 0,d={},f=arguments.length,g=Array(f>1?f-1:0),h=1;h<f;h++)g[h-1]=arguments[h];b=1===g.length?g[0]:this.default.apply(this,e(Array.from(g||[])));for(var i in b)c=b[i],c instanceof Array?d[i]=a[i]||c:"object"===(void 0===c?"undefined":k(c))&&"object"===k(a[i])?d[i]=this.default(a[i],c):d[i]=a[i]||c;for(var j in a)c=a[j],d[j]=d[j]||c;return d}}),angular.module("bicker_router").directive("routeClass",f),angular.module("bicker_router").directive("routeHref",g),angular.module("bicker_router").directive("view",h);var l=function(){function a(b){d(this,a),this.$rootScope=b,this.count=0,this.initialViewsLoaded=!1}return j(a,[{key:"get",value:function(){return this.count}},{key:"increase",value:function(){return this.count+=1}},{key:"decrease",value:function(){this.count=Math.max(0,this.count-1),0===this.count&&(this.initialViewsLoaded?this.$rootScope.$broadcast("bicker_router.currentViewsLoaded"):(this.initialViewsLoaded=!0,this.$rootScope.$broadcast("bicker_router.initialViewsLoaded")))}},{key:"reset",value:function(){return this.count=0,this.initialViewsLoaded=!1}}]),a}();angular.module("bicker_router").factory("PendingViewCounter",["$rootScope",function(a){"ngInject";return new l(a)}]);var m=function(){function a(b,c,e){d(this,a),this.ObjectHelper=b,this.WatcherFactory=c,this.list=e,this.watchers=[]}return j(a,[{key:"get",value:function(a){return this.ObjectHelper.get(this.list,a)}},{key:"getAll",value:function(){return this.list}},{key:"getSubset",value:function(a){return _.zipObject(a,_.map(a,this.get.bind(this)))}},{key:"set",value:function(a,b){this.ObjectHelper.set(this.list,a,b),this._notifyWatchers(a,b)}},{key:"unset",value:function(a){var b=this;a instanceof Array||(a=[a]),_(a).each(function(a){b.ObjectHelper.unset(b.list,a),b._notifyWatchers(a,void 0)})}},{key:"watch",value:function(a,b){var c=this;a instanceof Array||(a=[a]),_(a).each(function(a){c.watchers.push(c.WatcherFactory.create(a,b,c.get(a)))})}},{key:"removeWatcher",value:function(a){if(0!==this.watchers.length){var b=[];return _.each(this.watchers,function(c){c.handler!==a&&b.push(c)}),this.watchers=b}}},{key:"_notifyWatchers",value:function(a,b){var c=this;_.each(this.watchers,function(d){if(d.shouldNotify(a,b)){var e=c.ObjectHelper.get(c.list,d.watchPath);d.notify(a,e)}})}}]),a}(),n=function(){function a(b,c){d(this,a),this.ObjectHelper=b,this.WatcherFactory=c}return j(a,[{key:"create",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new m(this.ObjectHelper,this.WatcherFactory,a)}}]),a}();angular.module("bicker_router").factory("WatchableListFactory",["ObjectHelper","WatcherFactory",function(a,b){"ngInject";return new n(a,b)}]);var o=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;d(this,a),this.watchPath=b,this.handler=c,this.currentValue=_.cloneDeep(e)}return j(a,[{key:"_tokenizePath",value:function(a){return a.split(".")}},{key:"shouldNotify",value:function(a,b){if(this.watchPath===a)return!angular.equals(this.currentValue,b);for(var c={path:this.watchPath,tokens:this._tokenizePath(this.watchPath),value:this.currentValue},d={path:a,tokens:this._tokenizePath(a),value:b},e=Math.min(d.tokens.length,c.tokens.length),f=0;f<e;f++)if(c.tokens[f]!==d.tokens[f])return!1;if(d.tokens.length>c.tokens.length){var g=d.tokens.slice(c.tokens.length).join("."),h=_.get(c.value,g);return!angular.equals(h,d.value)}var i=c.tokens.slice(d.tokens.length).join("."),j=_.get(d.value,i);return!angular.equals(c.value,j)}},{key:"notify",value:function(a,b){this.handler(a,b,this.currentValue),this.currentValue=_.cloneDeep(b)}}]),a}(),p=function(){function a(){d(this,a)}return j(a,[{key:"create",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new o(a,b,c)}}]),a}();angular.module("bicker_router").factory("WatcherFactory",function(){return new p}),angular.module("bicker_router").provider("Route",["ObjectHelper",function(a){"ngInject";var b={},c=[],d=[],e=[],f={},g=!1,h={registerType:function(a,b){return f[a]=b,f[a].regex=new RegExp(f[a].regex.source,"i"),_.extend({and:this.registerType},this)},registerUrlToken:function(a,c){return b[a]=_.extend({name:a},c),_.extend({and:this.registerUrlToken},this)},registerUrlWriter:function(a,b){return c[a]=b,_.extend({and:this.registerUrlWriter},this)},registerUrl:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={compiledUrl:this._compileUrlPattern(a,b),pattern:a};return d.push(_.extend(c,b)),_.extend({and:this.registerUrl},this)},setPersistentStates:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];_.forEach(b,function(a){e.includes(a)||e.push(a)})},setHtml5Mode:function(a){g=a},_compileUrlPattern:function(a,c){var d=void 0;a=this._escapeRegexSpecialCharacters(a),a=this._ensureOptionalTrailingSlash(a);var e=/\{([A-Za-z\._0-9]+)\}/g,g=a;c.partialMatch||(g="^"+g+"$");for(var h=[];null!==(d=e.exec(a));){var i=b[d[1]];h.push(i),g=g.replace(d[0],"("+f[i.type].regex.source+")")}return g.replace(".","\\."),{regex:new RegExp(g,"i"),tokens:h}},_ensureOptionalTrailingSlash:function(a){return a.match(/\/$/)?a.replace(/\/$/,"/?"):a+"/?"},_escapeRegexSpecialCharacters:function(a){return a.replace(/[\-\[\]\/\(\)\*\+\?\\\^\$\|]/g,"\\$&")},$get:["$location","$injector","$q",function(h,i,j){_.forIn(c,function(a,b){return c[b]=function(b){b||(b={});var c={UrlData:b};return i.invoke(a,{},c)}});var l=[];return{currentBindings:{},readyDeferred:j.defer(),match:function(a){var b=!0,c=!1,e=void 0;try{for(var f,g=Array.from(d)[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var h=f.value,i=void 0;if(null!==(i=h.compiledUrl.regex.exec(a)))return{url:h,regexMatch:i}}}catch(a){c=!0,e=a}finally{try{!b&&g.return&&g.return()}finally{if(c)throw e}}return null},extractData:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,d=this.extractDefaultData(b),e=this.extractPathData(b);return c=this.extractSearchData(c),a.default(c,e,d)},extractSearchData:function(c){c||(c=h.search());var d=_.clone(c),e={};return _.forEach(d,function(c,d){var g=_.findKey(b,{searchAlias:d});g||(g=d);var h=b[g]?_.get(b[g],"type"):void 0;if(!b[g]||f[h].regex.test(c)){var j=b[g]?b[g].type:void 0,k=j?f[j]:void 0,l=k?k.parser:void 0;l&&(c=i.invoke(l,null,{token:c}));var m=b[g]?b[g].statePath:void 0,n=m||g;a.set(e,n,c)}}),e},extractDefaultData:function(b){var c={};return _.forEach(b.url.state,function(b,d){a.set(c,d,"object"===(void 0===b?"undefined":k(b))?_.cloneDeep(b):b)}),c},extractPathData:function(b){var c={},d=b.url.compiledUrl.tokens;if(0===d.length)return{};for(var e=0,g=d.length-1,h=0<=g;h?e<=g:e>=g;h?e++:e--){var j=b.url.compiledUrl.tokens[e],k=b.regexMatch[e+1];f[j.type].parser&&(k=i.invoke(f[j.type].parser,null,{token:k})),a.set(c,j.statePath||j.name,k)}return c},getUrlWriters:function(){return c},getUrlWriter:function(a){return c[a]},invokeUrlWriter:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c[a](b)},go:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h.url(this.invokeUrlWriter(a,b))},getPersistentStates:function(){return e},resetFlashStates:function(){l=[]},addFlashStates:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];l=l.concat(b)},getFlashStates:function(){return l},setCurrentBinding:function(a,b){this.currentBindings[a]=b},getCurrentBinding:function(a){return this.currentBindings[a]},deleteCurrentBinding:function(a){delete this.currentBindings[a]},matchesCurrentBindingName:function(a,b){var c=this.getCurrentBinding(a);return!!c&&(b instanceof RegExp?b.test(c.name):c.name===b)},setReady:function(a){return a?this.readyDeferred.resolve():this.readyDeferred=j.defer(),a},isReady:function(){return!1},isHtml5ModeEnabled:function(){return g},whenReady:function(){return this.readyDeferred.promise}}}]};return h.registerType("numeric",{regex:/\d+/,parser:["token",function(a){return parseInt(a)}]}),h.registerType("alpha",{regex:/[a-zA-Z]+/}),h.registerType("any",{regex:/.+/}),h.registerType("list",{regex:/.+/,parser:["token",function(a){return a.split(",")}]}),h}]);var q=function(){function a(){d(this,a)}return j(a,[{key:"$get",value:["WatchableListFactory",function(a){"ngInject";return a.create()}]}]),a}();angular.module("bicker_router").provider("State",new q),angular.module("bicker_router").provider("ViewBindings",function(){var a=[],b=function(){function a(b,c){d(this,a),this.name=b,this.bindings=c,this.bindings instanceof Array||(this.bindings=[this.bindings])}return j(a,[{key:"getBindings",value:function(){return this.bindings}}]),a}();return{bind:function(c,d){function e(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,i=Array.from(h)[Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j=g.value;j.requiredState instanceof Array||(j.requiredState=[j.requiredState]),c.push(j.requiredState=j.requiredState.concat(b))}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c}function f(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,i=Array.from(h)[Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j=g.value;"resolve"in j||(j.resolve={}),c.push(_.defaults(j.resolve,b))}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c}function g(a,b,c){var d=[],e=!0,f=!1,g=void 0;try{for(var i,j=Array.from(h)[Symbol.iterator]();!(e=(i=j.next()).done);e=!0){var k=i.value,l=void 0;b in k||(l=k[b]=c),d.push(l)}}catch(a){f=!0,g=a}finally{try{!e&&j.return&&j.return()}finally{if(f)throw g}}return d}var h=[];if(h="bindings"in d?d.bindings:d instanceof Array?d:[d],!(h.length>0))throw new Error("Invalid call to ViewBindingsProvider.bind for name '"+c+"'");return function(a){var b=[{name:"commonResolvingErrorTemplateUrl",overrideField:"resolvingErrorTemplateUrl"},{name:"commonResolvingErrorComponent",overrideField:"resolvingErrorComponent"},{name:"commonErrorComponent",overrideField:"errorComponent"},{name:"commonErrorTemplateUrl",overrideField:"errorTemplateUrl"}],c=!0,h=!1,i=void 0;try{for(var j,k=Array.from(b)[Symbol.iterator]();!(c=(j=k.next()).done);c=!0){var l=j.value;l.name in d&&g(a,l.overrideField,d[l.name])}}catch(a){h=!0,i=a}finally{try{!c&&k.return&&k.return()}finally{if(h)throw i}}if("commonRequiredState"in d&&e(a,d.commonRequiredState),"commonResolve"in d)f(a,d.commonResolve)}(h),a[c]=new b(c,h)},$get:function(){return{getView:function(b){return a[b]}}}}})},{}]},{},[1]);
//# sourceMappingURL=bicker.min.js.map