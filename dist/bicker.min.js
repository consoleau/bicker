(function(){angular.module("bicker_router",["ngAnimate"]).run(function(a,b,c,d,e,f){var g;return g=void 0,d.$on("$locationChangeStart",function(){if(b.isReady())return b.setReady(!1)}),d.$on("$locationChangeSuccess",function(h,i){var j,k,l,m,n,o,p;if(i!==g){g=i,f.reset(),n=b.match(c.path()),j=n?b.extractData(n):{},l=e.notIn(a.list,j),l=_.difference(l,b.getPersistentStates().concat(b.getFlashStates())),k={unsetting:l,setting:j},d.$emit("bicker_router.beforeStateChange",k),0!==k.unsetting.length&&a.unset(k.unsetting),o=k.setting;for(m in o)p=o[m],a.set(m,p);b.resetFlashStates(),b.setReady(!0)}})})}).call(this),function(){var a=[].slice;angular.module("bicker_router").constant("ObjectHelper",{get:function(a,b){var c,d,e,f,g,h;if(""===b)return a;for(g=b.split("."),d=g.pop(),f=a,c=0,e=g.length;c<e;c++)if(h=g[c],f=f[h],void 0===f)return;return f[d]},set:function(a,b,c){var d,e,f,g,h,i;for(h=b.split("."),e=h.pop(),g=a,d=0,f=h.length;d<f;d++)i=h[d],void 0===g[i]&&(g[i]={}),g=g[i];return g[e]=c},unset:function(a,b){var c,d,e,f,g,h;if(""===b)return a;for(g=b.split("."),d=g.pop(),f=a,c=0,e=g.length;c<e;c++)if(h=g[c],f=f[h],void 0===f)return!1;return void 0!==f[d]&&(delete f[d],!0)},notIn:function(a,b,c){var d,e,f,g,h,i;for(null==c&&(c=""),g=[],c=c.length>0?c+".":"",h=Object.keys(a),d=0,f=h.length;d<f;d++)e=h[d],i=""+c+e,void 0===b[e]?g.push(i):"object"!=typeof a[e]||a[e]instanceof Array||(g=g.concat(this.notIn(a[e],b[e],i)));return g},"default":function(){var b,c,d,e,f,g;e=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],f={},b=1===c.length?c[0]:this["default"].apply(this,c);for(d in b)g=b[d],g instanceof Array?f[d]=e[d]||g:"object"==typeof g&&"object"==typeof e[d]?f[d]=this["default"](e[d],g):f[d]=e[d]||g;for(d in e)g=e[d],f[d]=f[d]||g;return f}})}.call(this),function(){angular.module("bicker_router").directive("routeHref",function(a,b,c){return{restrict:"A",scope:!0,link:function(d,e,f){var g,h,i;void 0===f.ignoreHref&&e.click(function(d){var f;return d.preventDefault(),f=e.attr("href"),a.isHtml5ModeEnabled()||(f=f.replace(/^#/,"")),c(function(){return b.url(f)})}),g=a.getUrlWriters();for(i in g)h=g[i],d[i+"UrlWriter"]=h;return d.$watch(f.routeHref,function(b){var c;return c=a.isHtml5ModeEnabled()?b:"#"+b,e.attr("href",c)})}}})}.call(this),function(){angular.module("bicker_router").directive("view",function(a,b,c,d,e,f,g,h,i,j,k,l){var m;return m={restrict:"E",scope:!1,replace:!0,template:"<div></div>",link:function(m,n,o){var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;return I=!1,K=void 0,J=!1,H=c.getView(o.name),p=H.getBindings(),n.addClass("ng-hide"),C=void 0,B=void 0,w=function(a){return _.cloneDeep(e.getSubset(x(a)))},t=function(a){var b;return b=a.component?i.get(a.component+"Directive")[0]:a,_.defaults(_.pick(b,["controller","templateUrl","controllerAs"]),{controllerAs:"$ctrl"})},z=function(a){var b,c,d,f,g,h;for(g=a.requiredState||[],c=0,d=g.length;c<d;c++){if(h=g[c],f=!1,"!"===h.charAt(0)&&(h=h.slice(1),f=!0),b=e.get(h),null==b)return!1;if(f&&(b=!b),!b)return!1}return!(a.canActivate&&!i.invoke(a.canActivate))},A=function(a,b){var c,d;return(c=v(b))?(d=w(c),c===B&&angular.equals(C,d)?void 0:(B=c,C=d,j.increase(),F(a,c).then(function(b){var d;return d=b?300:void 0,I?(K.$destroy(),q(a,c,d)):g.removeClass(a,"ng-hide").then(function(b){return function(){return q(a,c,d)}}(this))}))):void(I&&(g.addClass(a,"ng-hide").then(function(b){return function(){return r(a)}}(this)),C=void 0,B=void 0))},v=function(a){var b,c,d;for(c=0,d=a.length;c<d;c++)if(b=a[c],z(b))return b},r=function(a){if(I!==!1)return I=!1,a.html(""),K.$destroy()},q=function(c,e,f){var g,i,l,n,o;return o=Date.now(),g=t(e),l=function(d){var i,k,l;if(v(p)===e)return I=!0,l=Date.now()-o,i=function(){var f,i,k,l,n;return i=d.dependencies,n=d.template,c.html(n),k=a(c.contents()),K=m.$new(),g.controller&&(l=_.merge(i,{$scope:K}),f=b(g.controller,l),l.$scope[g.controllerAs]=f),k(K),h(function(){if(!e.manualCompletion)return j.decrease()})},k=Math.max(0,f-l),l<f?h(function(){return i()},k):i()},i=function(){return h(function(){if(!e.manualCompletion)return j.decrease()}),E(c,e)},n={template:k(g.templateUrl),dependencies:D(e)},d.all(n).then(l,i)},F=function(b,c){var e;return c.resolvingTemplateUrl&&c.resolve&&0!==Object.keys(c.resolve).length?k(c.resolvingTemplateUrl).then(function(c){return b.html(c),a(b.contents())(f.$new())}):(e=d.defer(),e.resolve(!1),e.promise)},E=function(a,b){if(b.resolvingErrorTemplateUrl)return k(b.resolvingErrorTemplateUrl).then(function(b){return a.html(b)})},D=function(a){var b,c,e,f,g;if(!a.resolve||0===Object.keys(a.resolve).length)return b=d.defer(),b.resolve({}),b.promise;f={},g=a.resolve;for(e in g)c=g[e],f[e]=i.invoke(c);return d.all(f)},x=function(a){return _.union(a.requiredState||[],a.watchedState||[])},G=function(a){return"!"===a.charAt(0)?a.substr(1):a},y=function(a){return _.flatten(_.map(a.getBindings(),x))},u=function(a){return _.uniq(_.map(y(a),G))},s=u(H),l.whenReady().then(function(){var a;if(J=!0,A(n,p),J=!1,0!==s.length)return a=function(){if(!J)return J=!0,h(function(){return A(n,p),J=!1})},e.watch(s,a),m.$on("$destroy",function(){return e.removeWatcher(a)})})}}})}.call(this),function(){angular.module("bicker_router").factory("PendingViewCounter",function(a){var b;return new(b=function(){function b(){}return b.prototype.count=0,b.prototype.initialViewsLoaded=!1,b.prototype.get=function(){return this.count},b.prototype.increase=function(){return this.count+=1},b.prototype.decrease=function(){if(this.count=Math.max(0,this.count-1),0===this.count)return this.initialViewsLoaded?a.$broadcast("bicker_router.currentViewsLoaded"):(a.$broadcast("bicker_router.initialViewsLoaded"),this.initialViewsLoaded=!0)},b.prototype.reset=function(){return this.count=0,this.initialViewsLoaded=!1},b}())})}.call(this),function(){angular.module("bicker_router").factory("WatchableListFactory",function(a,b){var c,d;return c=function(){function c(a){this.list=a,this.watchers=[]}return c.prototype.get=function(b){return a.get(this.list,b)},c.prototype.getAll=function(){return this.list},c.prototype.getSubset=function(a){return _.zipObject(a,_.map(a,this.get.bind(this)))},c.prototype.set=function(b,c){return a.set(this.list,b,c),this._notifyWatchers(b,c)},c.prototype.unset=function(b){var c,d,e,f;for(b instanceof Array||(b=[b]),f=[],c=0,d=b.length;c<d;c++)e=b[c],a.unset(this.list,e),f.push(this._notifyWatchers(e,void 0));return f},c.prototype.watch=function(a,c){var d,e,f,g;for(a instanceof Array||(a=[a]),g=[],d=0,e=a.length;d<e;d++)f=a[d],g.push(this.watchers.push(b.create(f,c,this.get(f))));return g},c.prototype.removeWatcher=function(a){var b,c,d,e;if(0!==this.watchers.length){for(d=[],c=b=0,e=this.watchers.length-1;0<=e?b<=e:b>=e;c=0<=e?++b:--b)this.watchers[c].handler!==a&&d.push(this.watchers[c]);return this.watchers=d}},c.prototype._notifyWatchers=function(b){var c,d,e,f,g,h;for(e=this.watchers,f=[],c=0,d=e.length;c<d;c++)h=e[c],g=a.get(this.list,h.watchPath),h.shouldNotify(b,g)?f.push(h.notify(b,g)):f.push(void 0);return f},c}(),d={create:function(a){return null==a&&(a={}),new c(a)}}})}.call(this),function(){angular.module("bicker_router").factory("WatcherFactory",function(){var a,b;return a=function(){function a(a,b,c){this.watchPath=a,this.handler=b,null==c&&(c=void 0),this.currentValue=_.cloneDeep(c)}return a.prototype.shouldNotify=function(a,b){return!angular.equals(this.currentValue,b)},a.prototype.notify=function(a,b){return this.handler(a,b,this.currentValue),this.currentValue=_.cloneDeep(b)},a}(),b={create:function(b,c,d){return null==d&&(d=void 0),new a(b,c,d)}}})}.call(this),function(){var a=[].slice,b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("bicker_router").provider("Route",function(c){var d,e,f,g,h,i,j,k;return h={},j={},k=[],e=[],g=!1,i={},d=!1,f={registerType:function(a,b){return i[a]=b,i[a].regex=new RegExp(i[a].regex.source,"i"),_.extend({and:this.registerType},this)},registerUrlToken:function(a,b){return h[a]=_.extend({name:a},b),_.extend({and:this.registerUrlToken},this)},registerUrlWriter:function(a,b){return j[a]=b,_.extend({and:this.registerUrlWriter},this)},registerUrl:function(a,b){var c;return null==b&&(b={}),c={compiledUrl:this._compileUrlPattern(a,b),pattern:a},k.unshift(_.extend(c,b)),_.extend({and:this.registerUrl},this)},setPersistentStates:function(){var c,d,f,g,h;for(h=1<=arguments.length?a.call(arguments,0):[],f=[],c=0,d=h.length;c<d;c++)g=h[c],b.call(e,g)<0?f.push(e.push(g)):f.push(void 0);return f},setHtml5Mode:function(a){return d=a},_compileUrlPattern:function(a,b){var c,d,e,f,g,j;for(a=this._escapeRegexSpecialCharacters(a),a=this._ensureOptionalTrailingSlash(a),g=/\{([A-Za-z\._0-9]+)\}/g,j=a,b.partialMatch||(j="^"+j+"$"),f=[];null!==(d=g.exec(a));)e=h[d[1]],f.push(e),j=j.replace(d[0],"("+i[e.type].regex.source+")");return j.replace(".","\\."),c={regex:new RegExp(j,"i"),tokens:f}},_ensureOptionalTrailingSlash:function(a){return a.match(/\/$/)?a.replace(/\/$/,"/?"):a+"/?"},_escapeRegexSpecialCharacters:function(a){return a.replace(/[\-\[\]\/\(\)\*\+\?\\\^\$\|]/g,"\\$&")},$get:function(b,f,g,l){var m,n;return _.forIn(j,function(a,b){return j[b]=function(b){var c;return null==b&&(b={}),c={UrlData:b},g.invoke(a,{},c)}}),m=[],n={readyDeferred:l.defer(),match:function(a){var b,c,d,e;for(b=0,c=k.length;b<c;b++)if(e=k[b],null!==(d=e.compiledUrl.regex.exec(a)))return{url:e,regexMatch:d};return null},extractData:function(a,b){var d,e;return null==b&&(b=void 0),d=this.extractDefaultData(a),e=this.extractPathData(a),b=this.extractSearchData(b),c["default"](b,e,d)},extractSearchData:function(a){var d,e,f,j,k,l,m,n,o,p,q,r;null==a&&(a=b.search()),d=_.clone(a),j={};for(f in d)r=d[f],q=_.findKey(h,{searchAlias:f}),null==q&&(q=f),(!h[q]||(null!=(k=i[null!=(l=h[q])?l.type:void 0])?k.regex.test(r):void 0))&&((null!=(m=i[null!=(n=h[q])?n.type:void 0])?m.parser:void 0)&&(r=g.invoke(null!=(o=i[h[q].type])?o.parser:void 0,null,{token:r})),e=(null!=(p=h[q])?p.statePath:void 0)||q,c.set(j,e,r));return j},extractDefaultData:function(a){var b,d,e,f;b={},e=a.url.state;for(d in e)f=e[d],c.set(b,d,"object"==typeof f?_.cloneDeep(f):f);return b},extractPathData:function(a){var b,d,e,f,h,j,k;if(b={},f=a.url.compiledUrl.tokens,0===f.length)return{};for(e=d=0,h=f.length-1;0<=h?d<=h:d>=h;e=0<=h?++d:--d)j=a.url.compiledUrl.tokens[e],k=a.regexMatch[e+1],i[j.type].parser&&(k=g.invoke(i[j.type].parser,null,{token:k})),c.set(b,j.statePath||j.name,k);return b},getUrlWriters:function(){return j},getUrlWriter:function(a){return j[a]},invokeUrlWriter:function(a,b){return null==b&&(b={}),j[a](b)},go:function(a,c){return null==c&&(c={}),b.url(this.invokeUrlWriter(a,c))},getPersistentStates:function(){return e},resetFlashStates:function(){return m=[]},addFlashStates:function(){var b;return b=1<=arguments.length?a.call(arguments,0):[],m=m.concat(b)},getFlashStates:function(){return m},setReady:function(a){return a?this.readyDeferred.resolve():this.readyDeferred=l.defer(),this.ready=a},isReady:function(){return this.ready},isHtml5ModeEnabled:function(){return d},whenReady:function(){return this.readyDeferred.promise}}}},f.registerType("numeric",{regex:/\d+/,parser:["token",function(a){return parseInt(a)}]}),f.registerType("alpha",{regex:/[a-zA-Z]+/}),f.registerType("any",{regex:/.+/}),f})}.call(this),function(){angular.module("bicker_router").provider("State",function(){return{$get:function(a){var b;return b=a.create()}}})}.call(this),function(){angular.module("bicker_router").provider("ViewBindings",function(){var a,b,c;return c={},a=function(){function a(a,b){this.name=a,this.bindings=b,this.bindings instanceof Array||(this.bindings=[this.bindings])}return a.prototype.getBindings=function(){return this.bindings},a}(),b={bind:function(b,d){var e,f,g;if(e=function(a,b){var c,d,e,f;for(f=[],d=0,e=g.length;d<e;d++)c=g[d],c.requiredState instanceof Array||(c.requiredState=[c.requiredState]),f.push(c.requiredState=c.requiredState.concat(b));return f},f=function(a,b){var c,d,e,f;for(f=[],d=0,e=g.length;d<e;d++)c=g[d],"resolve"in c||(c.resolve={}),f.push(_.defaults(c.resolve,b));return f},g=[],g="bindings"in d?d.bindings:d instanceof Array?d:[d],!(g.length>0))throw new Error("Invalid call to ViewBindingsProvider.bind for name '"+b+"'");return"commonRequiredState"in d&&e(g,d.commonRequiredState),"commonResolve"in d&&f(g,d.commonResolve),c[b]=new a(b,g)},$get:function(){return{getView:function(a){return c[a]}}}}})}.call(this);
//# sourceMappingURL=bicker.min.js.map