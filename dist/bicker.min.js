!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h="function"==typeof Symbol&&"symbol"===f(Symbol.iterator)?function(a){return void 0===a?"undefined":f(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":void 0===a?"undefined":f(a)};angular.module("bicker_router",["ngAnimate"]).run(["State","Route","$location","$rootScope","ObjectHelper","PendingViewCounter",function(a,b,c,d,e,f){"ngInject";var g=void 0;d.$on("$locationChangeStart",function(){b.isReady()&&b.setReady(!1)}),d.$on("$locationChangeSuccess",function(h,i){var j=void 0;if(i!==g){g=i,f.reset();var k=b.match(c.path());j=k?b.extractData(k):{};var l=e.notIn(a.list,j);l=_.difference(l,b.getPersistentStates().concat(b.getFlashStates()));var m={unsetting:l,setting:j};d.$emit("bicker_router.beforeStateChange",m),0!==m.unsetting.length&&a.unset(m.unsetting),_.forEach(m.setting,function(b,c){a.set(c,b)}),b.resetFlashStates(),b.setReady(!0)}})}]),angular.module("bicker_router").constant("ObjectHelper",{get:function(a,b){if(""===b)return a;var c=b.split("."),d=c.pop(),e=a,f=!0,g=!1,h=void 0;try{for(var i,j=c[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){if(void 0===(e=e[i.value]))return}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}return e[d]},set:function(a,b,c){var d=b.split("."),e=d.pop(),f=a,g=!0,h=!1,i=void 0;try{for(var j,k=d[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value;void 0===f[l]&&(f[l]={}),f=f[l]}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}return f[e]=c},unset:function(a,b){if(""===b)return a;var c=b.split("."),d=c.pop(),e=a,f=!0,g=!1,h=void 0;try{for(var i,j=c[Symbol.iterator]();!(f=(i=j.next()).done);f=!0){if(void 0===(e=e[i.value]))return!1}}catch(a){g=!0,h=a}finally{try{!f&&j.return&&j.return()}finally{if(g)throw h}}return void 0!==e[d]&&(delete e[d],!0)},notIn:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=[];c=c.length>0?c+".":"";var e=!0,f=!1,g=void 0;try{for(var i,j=Array.from(Object.keys(a))[Symbol.iterator]();!(e=(i=j.next()).done);e=!0){var k=i.value,l=""+c+k;void 0===b[k]?d.push(l):"object"!==h(a[k])||a[k]instanceof Array||(d=d.concat(this.notIn(a[k],b[k],l)))}}catch(a){f=!0,g=a}finally{try{!e&&j.return&&j.return()}finally{if(f)throw g}}return d},default:function(a){for(var b=void 0,c=void 0,d={},f=arguments.length,g=Array(f>1?f-1:0),i=1;i<f;i++)g[i-1]=arguments[i];b=1===g.length?g[0]:this.default.apply(this,e(Array.from(g||[])));for(var j in b)c=b[j],c instanceof Array?d[j]=a[j]||c:"object"===(void 0===c?"undefined":h(c))&&"object"===h(a[j])?d[j]=this.default(a[j],c):d[j]=a[j]||c;for(var k in a)c=a[k],d[k]=d[k]||c;return d}});var i=function a(b,c,e){d(this,a),this.restrict="A",this.scope=!0,this.link=function(a,d,f){void 0===f.ignoreHref&&d.click(function(a){a.preventDefault();var f=d.attr("href");return b.isHtml5ModeEnabled()||(f=f.replace(/^#/,"")),e(function(){return c.url(f)})});var g=b.getUrlWriters();for(var h in g){var i=g[h];a[h+"UrlWriter"]=i}return a.$watch(f.routeHref,function(a){var c=void 0;return c=b.isHtml5ModeEnabled()?a:"#"+a,d.attr("href",c)})}};angular.module("bicker_router").directive("routeHref",["Route","$location","$timeout",function(a,b,c){"ngInject";return new i(a,b,c)}]);var j=function a(b,c,e,f,g,h,i,j,k,l,m,n,o){d(this,a),this.restrict="E",this.scope=!1,this.replace=!0,this.template="<div></div>",this.link=function(a,d,p){function q(a,b){b||(b="component");var c=a[b]?l.get(a[b]+"Directive")[0]:a;return _.defaults(_.pick(c,["controller","templateUrl","controllerAs"]),{controllerAs:"$ctrl"})}function r(a){var b=a.requiredState||[],c=!0,d=!1,e=void 0;try{for(var f,g=Array.from(b)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var i=f.value,j=!1;"!"===i.charAt(0)&&(i=i.slice(1),j=!0);var k=h.get(i);if(null===k)return!1;if(j&&(k=!k),!k)return!1}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return!(a.canActivate&&!l.invoke(a.canActivate))}function s(a,b){var c=t(b);if(!c)return console.log(p.name+" : manageView : no matching binding"),void(D&&(j.addClass(a,"ng-hide").then(function(){return u(a)}),I=void 0,J=void 0));var d=K(c);return console.log(p.name+" : manageView : matching binding yeilds state : "+JSON.stringify(d,{},2)),c===J&&angular.equals(I,d)?void console.log(p.name+" : manageView : binding state matches existing. Aborting"):(J=c,I=d,m.increase(),console.log(p.name+" : manageView : resolving and showing resolve template"),w(a,c).then(function(b){var d=b?300:void 0;return console.log(p.name+" : manageView : resolve done, now creatingView"),D?(E.$destroy(),v(a,c,d)):j.removeClass(a,"ng-hide").then(function(){return v(a,c,d)})}))}function t(a){var b=!0,c=!1,d=void 0;try{for(var e,f=Array.from(a)[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;if(r(g))return g}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}function u(a){!1!==D&&(D=!1,a.children().eq(0).remove(),E.$destroy())}function v(a,c,d){var e=Date.now(),f=q(c),h=function(b){if(t(H)===c){D=!0;var g=Date.now()-e,h=function(){try{return B(a,f,b)}catch(b){return y(b,a,c)}finally{k(function(){if(!c.manualCompletion)return m.decrease()})}},i=Math.max(0,d-g);return g<d?k(function(){return h()},i):h()}},i=function(d){return k(function(){if(!c.manualCompletion)return m.decrease()}),b.error(d),x(d,a,c)},j={template:n(f.templateUrl),dependencies:N(c)};return g.all(j).then(h,i)}function w(a,b){if(!b.resolvingTemplateUrl||!b.resolve||0===Object.keys(b.resolve).length){var d=g.defer();return d.resolve(!1),d.promise}return n(b.resolvingTemplateUrl).then(function(b){return a.html(b),c(a.contents())(i.$new())})}function x(a,b,c){return c.resolvingErrorTemplateUrl?L(b,c):c.resolvingErrorComponent?A(a,b,c,"resolvingErrorComponent"):void 0}function y(a,b,c){var d=null;return c.errorTemplateUrl?d=M(b,c):c.errorComponent&&(d=A(a,b,c)),k(function(){if(!c.manualCompletion)return m.decrease()}),d}function z(b,d,e){if(d[e])return n(d[e]).then(function(d){b.html(d);var e=c(b.contents());return E=a.$new(),e(E)})}function A(a,b,c,d){if(d||(d="errorComponent"),c[d]){var e=q(c,d),f={dependencies:{error:a}};return n(e.templateUrl).then(function(a){return f.template=a,B(b,e,f)})}}function B(b,d,f){var g=f.dependencies,h=f.template;b.html(h),b.on("$destroy",function(){console.log(iattrs.name+": on element destroy")});var i=c(b.contents());if(E=a.$new(),d.controller){var j=_.merge(g,{$scope:E,$element:b.children().eq(0)}),k=e(d.controller,j);j.$scope[d.controllerAs]=k}return i(E)}function C(a){return"!"===a.charAt(0)?a.substr(1):a}console.log("linking new view : "+p.name);var D=!1,E=void 0,F=!1,G=f.getView(p.name),H=G.getBindings();d.addClass("ng-hide");var I=void 0,J=void 0,K=function(a){return _.cloneDeep(h.getSubset(O(a)))},L=function(a,b){return z(a,b,"resolvingErrorTemplateUrl")},M=function(a,b){return z(a,b,"errorTemplateUrl")},N=function(a){if(!a.resolve||0===Object.keys(a.resolve).length){var b=g.defer();return b.resolve({}),b.promise}var c={};for(var d in a.resolve){var e=a.resolve[d];try{c[d]=l.invoke(e)}catch(a){c[d]=g.reject(a)}}return g.all(c)},O=function(a){return _.union(a.requiredState||[],a.watchedState||[])},P=function(a){return _.flatten(_.map(a.getBindings(),O))},Q=function(a){return _.uniq(_.map(P(a),C))}(G);return o.whenReady().then(function(){if(F=!0,s(d,H),F=!1,0!==Q.length){var b=function(a,b,c){return console.log(p.name+" : stateWatcher called with changedPath: "+a+", newValue: "+JSON.stringify(b,{},2)+",  oldValue: "+JSON.stringify(c,{},2)),F?void console.log(p.name+" : stateWatcher called pending true. Abort"):(F=!0,console.log(p.name+" : stateWatcher calling manageView"),k(function(){return s(d,H),F=!1}))};h.watch(Q,b),a.$on("$destroy",function(){return h.removeWatcher(b)})}})}};angular.module("bicker_router").directive("view",["$log","$compile","$controller","ViewBindings","$q","State","$rootScope","$animate","$timeout","$injector","PendingViewCounter","$templateRequest","Route",function(a,b,c,d,e,f,g,h,i,k,l,m,n){"ngInject";return new j(a,b,c,d,e,f,g,h,i,k,l,m,n)}]);var k=function(){function a(b){d(this,a),this.$rootScope=b,this.count=0,this.initialViewsLoaded=!1}return g(a,[{key:"get",value:function(){return this.count}},{key:"increase",value:function(){return this.count+=1}},{key:"decrease",value:function(){this.count=Math.max(0,this.count-1),0===this.count&&(this.initialViewsLoaded?this.$rootScope.$broadcast("bicker_router.currentViewsLoaded"):(this.initialViewsLoaded=!0,this.$rootScope.$broadcast("bicker_router.initialViewsLoaded")))}},{key:"reset",value:function(){return this.count=0,this.initialViewsLoaded=!1}}]),a}();angular.module("bicker_router").factory("PendingViewCounter",["$rootScope",function(a){"ngInject";return new k(a)}]);var l=function(){function a(b,c,e){d(this,a),this.ObjectHelper=b,this.WatcherFactory=c,this.list=e,this.watchers=[]}return g(a,[{key:"get",value:function(a){return this.ObjectHelper.get(this.list,a)}},{key:"getAll",value:function(){return this.list}},{key:"getSubset",value:function(a){return _.zipObject(a,_.map(a,this.get.bind(this)))}},{key:"set",value:function(a,b){this.ObjectHelper.set(this.list,a,b),console.group("State.set calling notifyWatchers: "+a),console.log("new value:  : "+JSON.stringify(b,{},2)),this._notifyWatchers(a,b),console.groupEnd("State.set calling notifyWatchers: "+a)}},{key:"unset",value:function(a){var b=this;a instanceof Array||(a=[a]),_(a).each(function(a){b.ObjectHelper.unset(b.list,a),console.group("State.unset calling notifyWatchers: "+a),b._notifyWatchers(a,void 0),console.groupEnd("State.unset calling notifyWatchers: "+a)})}},{key:"watch",value:function(a,b){var c=this;a instanceof Array||(a=[a]),_(a).each(function(a){c.watchers.push(c.WatcherFactory.create(a,b,c.get(a)))})}},{key:"removeWatcher",value:function(a){if(0!==this.watchers.length){var b=[];return _.each(this.watchers,function(c){c.handler!==a&&b.push(c)}),this.watchers=b}}},{key:"_notifyWatchers",value:function(a,b){var c=this;_.each(this.watchers,function(d){if(d.shouldNotify(a,b)){console.group("WF: notifying watchPath: "+d.watchPath),console.log("changePath: "+a),console.log("oldValue: "+JSON.stringify(d.currentValue,{},2)),console.log("newValue: "+JSON.stringify(b,{},2));var e=c.ObjectHelper.get(c.list,d.watchPath);d.notify(a,e),console.groupEnd("WF: notifying watchPath: "+d.watchPath)}})}}]),a}(),m=function(){function a(b,c){d(this,a),this.ObjectHelper=b,this.WatcherFactory=c}return g(a,[{key:"create",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new l(this.ObjectHelper,this.WatcherFactory,a)}}]),a}();angular.module("bicker_router").factory("WatchableListFactory",["ObjectHelper","WatcherFactory",function(a,b){"ngInject";return new m(a,b)}]);var n=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;d(this,a),this.watchPath=b,this.handler=c,this.currentValue=_.cloneDeep(e)}return g(a,[{key:"_tokenizePath",value:function(a){return a.split(".")}},{key:"shouldNotify",value:function(a,b){if(this.watchPath===a)return!angular.equals(this.currentValue,b);for(var c={path:this.watchPath,tokens:this._tokenizePath(this.watchPath),value:this.currentValue},d={path:a,tokens:this._tokenizePath(a),value:b},e=Math.min(d.tokens.length,c.tokens.length),f=0;f<e;f++)if(c.tokens[f]!==d.tokens[f])return!1;if(d.tokens.length>c.tokens.length){var g=d.tokens.slice(c.tokens.length).join("."),h=_.get(c.value,g);return!angular.equals(h,d.value)}var i=c.tokens.slice(d.tokens.length).join("."),j=_.get(d.value,i);return!angular.equals(c.value,j)}},{key:"notify",value:function(a,b){this.handler(a,b,this.currentValue),this.currentValue=_.cloneDeep(b)}}]),a}(),o=function(){function a(){d(this,a)}return g(a,[{key:"create",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new n(a,b,c)}}]),a}();angular.module("bicker_router").factory("WatcherFactory",function(){return new o}),angular.module("bicker_router").provider("Route",["ObjectHelper",function(a){"ngInject";var b={},c=[],d=[],e=[],f={},g=!1,i={registerType:function(a,b){return f[a]=b,f[a].regex=new RegExp(f[a].regex.source,"i"),_.extend({and:this.registerType},this)},registerUrlToken:function(a,c){return b[a]=_.extend({name:a},c),_.extend({and:this.registerUrlToken},this)},registerUrlWriter:function(a,b){return c[a]=b,_.extend({and:this.registerUrlWriter},this)},registerUrl:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={compiledUrl:this._compileUrlPattern(a,b),pattern:a};return d.push(_.extend(c,b)),_.extend({and:this.registerUrl},this)},setPersistentStates:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];_.forEach(b,function(a){e.includes(a)||e.push(a)})},setHtml5Mode:function(a){g=a},_compileUrlPattern:function(a,c){var d=void 0;a=this._escapeRegexSpecialCharacters(a),a=this._ensureOptionalTrailingSlash(a);var e=/\{([A-Za-z\._0-9]+)\}/g,g=a;c.partialMatch||(g="^"+g+"$");for(var h=[];null!==(d=e.exec(a));){var i=b[d[1]];h.push(i),g=g.replace(d[0],"("+f[i.type].regex.source+")")}return g.replace(".","\\."),{regex:new RegExp(g,"i"),tokens:h}},_ensureOptionalTrailingSlash:function(a){return a.match(/\/$/)?a.replace(/\/$/,"/?"):a+"/?"},_escapeRegexSpecialCharacters:function(a){return a.replace(/[\-\[\]\/\(\)\*\+\?\\\^\$\|]/g,"\\$&")},$get:["$location","$injector","$q",function(i,j,k){_.forIn(c,function(a,b){return c[b]=function(b){b||(b={});var c={UrlData:b};return j.invoke(a,{},c)}});var l=[];return{readyDeferred:k.defer(),match:function(a){var b=!0,c=!1,e=void 0;try{for(var f,g=Array.from(d)[Symbol.iterator]();!(b=(f=g.next()).done);b=!0){var h=f.value,i=void 0;if(null!==(i=h.compiledUrl.regex.exec(a)))return{url:h,regexMatch:i}}}catch(a){c=!0,e=a}finally{try{!b&&g.return&&g.return()}finally{if(c)throw e}}return null},extractData:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,d=this.extractDefaultData(b),e=this.extractPathData(b);return c=this.extractSearchData(c),a.default(c,e,d)},extractSearchData:function(c){c||(c=i.search());var d=_.clone(c),e={};return _.forEach(d,function(c,d){var g=_.findKey(b,{searchAlias:d});g||(g=d);var h=b[g]?_.get(b[g],"type"):void 0;if(!b[g]||f[h].regex.test(c)){var i=b[g]?b[g].type:void 0,k=i?f[i]:void 0,l=k?k.parser:void 0;l&&(c=j.invoke(l,null,{token:c}));var m=b[g]?b[g].statePath:void 0,n=m||g;a.set(e,n,c)}}),e},extractDefaultData:function(b){var c={};return _.forEach(b.url.state,function(b,d){a.set(c,d,"object"===(void 0===b?"undefined":h(b))?_.cloneDeep(b):b)}),c},extractPathData:function(b){var c={},d=b.url.compiledUrl.tokens;if(0===d.length)return{};for(var e=0,g=d.length-1,h=0<=g;h?e<=g:e>=g;h?e++:e--){var i=b.url.compiledUrl.tokens[e],k=b.regexMatch[e+1];f[i.type].parser&&(k=j.invoke(f[i.type].parser,null,{token:k})),a.set(c,i.statePath||i.name,k)}return c},getUrlWriters:function(){return c},getUrlWriter:function(a){return c[a]},invokeUrlWriter:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c[a](b)},go:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.url(this.invokeUrlWriter(a,b))},getPersistentStates:function(){return e},resetFlashStates:function(){l=[]},addFlashStates:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];l=l.concat(b)},getFlashStates:function(){return l},setReady:function(a){return a?this.readyDeferred.resolve():this.readyDeferred=k.defer(),a},isReady:function(){return!1},isHtml5ModeEnabled:function(){return g},whenReady:function(){return this.readyDeferred.promise}}}]};return i.registerType("numeric",{regex:/\d+/,parser:["token",function(a){return parseInt(a)}]}),i.registerType("alpha",{regex:/[a-zA-Z]+/}),i.registerType("any",{regex:/.+/}),i.registerType("list",{regex:/.+/,parser:["token",function(a){return a.split(",")}]}),i}]);var p=function(){function a(){d(this,a)}return g(a,[{key:"$get",value:["WatchableListFactory",function(a){"ngInject";return a.create()}]}]),a}();angular.module("bicker_router").provider("State",new p),angular.module("bicker_router").provider("ViewBindings",function(){var a=[],b=function(){function a(b,c){d(this,a),this.name=b,this.bindings=c,this.bindings instanceof Array||(this.bindings=[this.bindings])}return g(a,[{key:"getBindings",value:function(){return this.bindings}}]),a}();return{bind:function(c,d){function e(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,i=Array.from(h)[Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j=g.value;j.requiredState instanceof Array||(j.requiredState=[j.requiredState]),c.push(j.requiredState=j.requiredState.concat(b))}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c}function f(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,i=Array.from(h)[Symbol.iterator]();!(d=(g=i.next()).done);d=!0){var j=g.value;"resolve"in j||(j.resolve={}),c.push(_.defaults(j.resolve,b))}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c}function g(a,b,c){var d=[],e=!0,f=!1,g=void 0;try{for(var i,j=Array.from(h)[Symbol.iterator]();!(e=(i=j.next()).done);e=!0){var k=i.value,l=void 0;b in k||(l=k[b]=c),d.push(l)}}catch(a){f=!0,g=a}finally{try{!e&&j.return&&j.return()}finally{if(f)throw g}}return d}var h=[];if(h="bindings"in d?d.bindings:d instanceof Array?d:[d],!(h.length>0))throw new Error("Invalid call to ViewBindingsProvider.bind for name '"+c+"'");return function(a){var b=[{name:"commonResolvingErrorTemplateUrl",overrideField:"resolvingErrorTemplateUrl"},{name:"commonResolvingErrorComponent",overrideField:"resolvingErrorComponent"},{name:"commonErrorComponent",overrideField:"errorComponent"},{name:"commonErrorTemplateUrl",overrideField:"errorTemplateUrl"}],c=!0,h=!1,i=void 0;try{for(var j,k=Array.from(b)[Symbol.iterator]();!(c=(j=k.next()).done);c=!0){var l=j.value;l.name in d&&g(a,l.overrideField,d[l.name])}}catch(a){h=!0,i=a}finally{try{!c&&k.return&&k.return()}finally{if(h)throw i}}if("commonRequiredState"in d&&e(a,d.commonRequiredState),"commonResolve"in d)f(a,d.commonResolve)}(h),a[c]=new b(c,h)},$get:function(){return{getView:function(b){return a[b]}}}}})},{}]},{},[1]);
//# sourceMappingURL=bicker.min.js.map